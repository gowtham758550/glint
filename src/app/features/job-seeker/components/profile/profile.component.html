<i class="bi bi-clipboard2-check"></i>

<div style="padding-top: 100px;"></div>
<div class="d-flex justify-content-center align-items-center h-100">
    <div class="flex-grow-1">
        <!-- Profile Image -->
        <div class="card">
            <div class="rounded-top text-white d-flex flex-row" style="background-color: #05292a; height:200px;">
                <div class="ms-4 mt-5 d-flex flex-column" style="width: 200px;">
                    <ng-container *ngIf="isImageLoaded; then image; else imageLoader"></ng-container>
                    <ng-template #imageLoader>
                        <p-skeleton shape="circle" size="8rem"></p-skeleton>
                    </ng-template>
                    <ng-template #image>
                        <img [src]="imageUrl" class="rounded-circle" style="width: 150px; height: 150px;"
                            (click)="openFileTrigger(fileTigger)">
                    </ng-template>

                </div>
                <input type="file" (change)="updateProfilePicture($event)" accept=".png,.jpg,.jpeg"
                    style="display: none;" #fileTigger>
            </div>
            <br>
            <!-- Profile Details -->
            <form [formGroup]="profileForm">
                <div class="card-body p-4 text-black">
                    <div class="flex">
                        <div class="flex">
                            <p class="lead fw-normal fs-4 mb-1 float-start">{{jobSeekerArray.firstName}}
                                {{jobSeekerArray.lastName}}</p>
                            <div class="float-end">
                                <button class="btn btn-rounded">
                                    <i class="pi pi-pencil" (click)="updateProfile(profileModal)"></i>
                                </button>
                            </div>
                            <span class="clearfix"></span>
                            <p class="fw-200 fs-6 mb-1">{{jobSeekerArray.about}}</p>
                            <p class="fw-200 fs-6 mb-1">{{jobSeekerArray.location}}</p>
                            <span class="clearfix"></span>

                            <p>
                                <span><i class="p-2 pi pi-envelope"></i></span>
                                <span class="ms-2">Email : {{email}}</span>
                            </p>
                            <p>
                                <span><i class="p-2 pi pi-calendar"></i></span>
                                <span class="ms-2">Date Of Birth :
                                    {{jobSeekerArray.dateOfBirth}}</span>
                            </p>

                        </div>
                    </div>
                </div>
            </form>
        </div>
        <div class="p-2"></div>
            <!-- Education Details -->
            <div class="card p-4" style="margin-top:0%">
                <div class="d-flex">
                    <div class="flex-grow-1 fs-4">
                        Education
                    </div>
                    <div>
                        <button class="btn btn-rounded" (click)="addEducation(educationModal)">
                            <i class="pi pi-plus"></i>
                        </button>
                    </div>
                </div>
                <hr>
                <ng-container *ngFor="let education of educationArray;">
                    <div class="pt-3 d-flex justify-content-start">
                        <div class="pt-3">
                            <img src="assets/university.svg" height="50px" width="50px">
                        </div>
                        <div class="ps-4 d-flex flex-column flex-grow-1">
                            <!-- {{education.value | json}} -->
                            <div class="fs-4 fw-bold">
                                {{education.universityName}}
                            </div>
                            <div class="fs-7">
                                {{education.qualification}}-
                                {{education.courseName}}
                            </div>
                            <div class="text-muted">
                                {{education.startDate | date}} -
                                {{education.completionDate | date}}
                            </div>
                        </div>
                        <div class="ps-2 pt-3">
                            <button class="btn btn-rounded"
                                (click)="editEducation(educationModal, education.educationDetailId)">
                                <i class="pi pi-pencil"></i>
                            </button>
                            <button class="ps-2 btn btn-rounded-danger"
                                (click)="deleteEducation(education.educationDetailId)">
                                <i class="pi pi-trash"></i>
                            </button>
                        </div>
                    </div>
                </ng-container>
            </div>
            <div class="p-2"></div>
            <!-- Experience Details  -->
            <div class="card p-4" style="margin-top:0%">
                <div class="d-flex">
                    <div class="flex-grow-1 fs-4">
                       Experience
                    </div>
                    <div>
                        <button class="btn btn-rounded" (click)="addExperience(experienceModal)">
                            <i class="pi pi-plus"></i>
                        </button>
                    </div>
                </div>
                <hr>
                <ng-container *ngFor="let experience of experienceArray; let id = index">
                    <div class="pt-3 d-flex justify-content-start">
                        <div class="pt-3">
                            <img src="../../../../../assets/company.png" height="50px" width="50px">
                        </div>
                        <div class="ps-4 d-flex flex-column flex-grow-1">
                            <div class="fs-4 fw-bold">
                                {{experience.previousCompanyName}}
                            </div>
                            <div class="fs-7">
                                {{experience.designation}}
                            </div>
                            <div class="text-muted">
                                Year(s) of Experience:
                                {{experience.yearOfExperience}}
                            </div>
                        </div>
                        <div class="ps-2 pt-3">
                            <button class="btn btn-rounded" (click)="editExperience(experienceModal, experience.experienceDetailId)">
                                <i class="pi pi-pencil"></i>
                            </button>
                            <button class="ps-2 btn btn-rounded-danger" (click)="deleteExperience(experience.experienceDetailId)">
                                <i class="pi pi-trash"></i>
                            </button>
                        </div>
                    </div>
                </ng-container>
            </div>
        </div>
    </div>
    <div class="p-2"></div>
    <ng-template #educationModal let-modal>
        <div class="modal-header">
            <h4 class="modal-title" id="modal-basic-title">
                {{action}} Education
            </h4>
            <button type="button" class="btn-close" aria-label="Close" (click)="modal.dismiss('Cross click')"></button>
        </div>
        <div class="modal-body d-flex justify-content-center">
            <app-form [formGroup]="educationForm" [formFields]="educationFields">
            </app-form>
        </div>
        <hr>
        <div class="text-end pb-3 pe-3">
            <button class="btn bg-dark text-white" style="border-radius: 13px;" [disabled]="!educationForm.valid"
                (click)="executeEducationAction()">
                {{action}}
            </button>
        </div>
    </ng-template>
    <ng-template #experienceModal let-modal>
        <div class="modal-header">
            <h4 class="modal-title" id="modal-basic-title">
                {{action}} Experience
            </h4>
            <button type="button" class="btn-close" aria-label="Close" (click)="modal.dismiss('Cross click')"></button>
        </div>
        <div class="modal-body d-flex justify-content-center">
            <app-form [formGroup]="experienceForm" [formFields]="experienceFields">
            </app-form>
        </div>
        <hr>
        <div class="text-end pb-3 pe-3">
            <button class="btn bg-dark text-white" style="border-radius: 13px;" [disabled]="!experienceForm.valid"
                (click)="executeExperienceAction()">
                {{action}}
            </button>
        </div>
    </ng-template>
    <ng-template #profileModal let-modal>
        <div class="modal-header">
            <h4 class="modal-title" id="modal-basic-title">
                {{action}} Profile
            </h4>
            <button type="button" class="btn-close" aria-label="Close" (click)="modal.dismiss('Cross click')"></button>
        </div>
        <div class="modal-body d-flex justify-content-center">
            <app-form [formGroup]="profileForm" [formFields]="profileFields">
            </app-form>
        </div>
        <hr>
        <div class="text-end pb-3 pe-3">
            <button class="btn bg-dark text-white" style="border-radius: 13px;" [disabled]="!profileForm.valid"
                (click)="executeProfileAction()">
                {{action}}
            </button>
        </div>
    </ng-template>